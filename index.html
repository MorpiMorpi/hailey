<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAILEY - Stress Management Chatbot</title>

    <!-- Include Botpress Webchat Script -->
    
    <script src="https://cdn.botpress.cloud/webchat/v2.5/inject.js"></script>
<script src="https://files.bpcontent.cloud/2025/05/12/12/20250512124345-Y5XDCYT0.js"></script>
    

    <style>
        body {
            background-color: #151515;
        }

        /* Webchat container styling */
        #webchat {
            width: 100%;
            height: 600px;
            border: 1px solid #151515;
            margin: 20px auto;
            max-width: 500px;
        }

        /* Fullscreen mode for webchat */
        #webchat .bpWebchat {
            position: unset;
            width: 100%;
            height: 100%;
            max-height: 100%;
            max-width: 100%;
        }

        /* Hide the floating button */
        #webchat .bpFab {
            display: none;
        }

        /* Basic page styling */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }

        h1 {
            color: white;
        }

        p {
            color: white;
        }
    </style>
</head>
<body>
    <h1>HAILEY - Stress Management Chatbot</h1>
    <p>Start chatting with HAILEY below:</p>

    <!-- Webchat Container -->
    <div id="webchat"></div>
        
    <!-- Webchat Initialization Script -->

    <script>
    function initializeBotpress() {
        // Check if the botpress object is available
        if (window.botpress) {
            console.log("Botpress script loaded!");

            // Wait for the webchat to be ready
            window.botpress.on("webchat:ready", () => {
                console.log("Botpress webchat ready!");
                window.botpress.open();  // Automatically open the chat window
            });

            // Initialize the webchat
            window.botpress.init({
                botId: "1812cadf-1d86-4b4c-860f-701aa71495de",  // Your Bot ID
                clientId: "de8ba891-26ee-4131-aa3f-8af9cfcb78b4",  // Your Client ID
                selector: "#webchat",
                config: {
                    color: "#5eb1ef",
                    variant: "soft",
                    themeMode: "light",
                    fontFamily: "inter",
                    radius: 4
                }
            });
        } else {
            console.error("Botpress script not loaded, retrying...");
            // Retry every 500ms until loaded (up to 10 tries)
            let retryCount = 0;
            const retryInterval = setInterval(() => {
                if (window.botpress) {
                    clearInterval(retryInterval);
                    console.log("Botpress loaded after retry!");
                    initializeBotpress();
                }
                retryCount++;
                if (retryCount >= 10) {
                    clearInterval(retryInterval);
                    console.error("Failed to load Botpress after multiple attempts.");
                }
            }, 500);
        }
    }

    // Run initialization when DOM is ready
    document.addEventListener("DOMContentLoaded", initializeBotpress);
</script>
    
</body>
</html>
